{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./index.js"],"sourcesContent":["const inputArea = document.querySelector(\".use-keyboard-input\");\r\nlet sondOnOff = true;\r\nlet recognition = new webkitSpeechRecognition();\r\n\r\nconst changeEn = {\r\n    \"й\": \"q\", \"ц\": \"w\", \"у\": \"e\", \"к\": \"r\", \"е\": \"t\", \"н\": \"y\", \"г\": \"u\",\r\n    \"ш\": \"i\", \"щ\": \"o\", \"з\": \"p\", \"х\": \"[\", \"ъ\": \"]\", \"ф\": \"a\", \"ы\": \"s\",\r\n    \"в\": \"d\", \"а\": \"f\", \"п\": \"g\", \"р\": \"h\", \"о\": \"j\", \"л\": \"k\", \"д\": \"l\",\r\n    \"ж\": \";\", \"э\": \"'\", \"я\": \"z\", \"ч\": \"x\", \"с\": \"c\", \"м\": \"v\", \"и\": \"b\",\r\n    \"т\": \"n\", \"ь\": \"m\", \"б\": \",\", \"ю\": \".\", \",\": \"?\", \".\": \"?\"\r\n};\r\n\r\nconst changeRu = {\r\n    \"q\": \"й\", \"w\": \"ц\", \"e\": \"у\", \"r\": \"к\", \"t\": \"е\", \"y\": \"н\", \"u\": \"г\",\r\n    \"i\": \"ш\", \"o\": \"щ\", \"p\": \"з\", \"[\": \"х\", \"]\": \"ъ\", \"{\": \"х\", \"}\": \"ъ\",\r\n    \"a\": \"ф\", \"s\": \"ы\", \"d\": \"в\", \"f\": \"а\", \"g\": \"п\", \"h\": \"р\", \"j\": \"о\",\r\n    \"k\": \"л\", \"l\": \"д\", \";\": \"ж\", \"'\": \"э\", \":\": \"ж\", '\"': \"э\", \"z\": \"я\",\r\n    \"x\": \"ч\", \"c\": \"с\", \"v\": \"м\", \"b\": \"и\", \"n\": \"т\", \"m\": \"ь\", \",\": \"б\",\r\n    \".\": \"ю\", \"/\": \".\", \"<\": \"б\", \">\": \"ю\", \"?\": \".\",\r\n};\r\n\r\nconst ruShift = {\r\n    \"1\": \"!\", \"2\": '\"', \"3\": \"№\", \"4\": \";\", \"5\": \"%\", \"6\": \":\", \"7\": \"?\",\r\n    \"8\": \"*\", \"9\": \"(\", \"0\": \")\", \".\": \",\",\r\n    \"!\": \"1\", '\"': \"2\", \"№\": \"3\", \";\": \"4\", \"%\": \"5\", \":\": \"6\", \"?\": \"7\",\r\n    \"*\": \"8\", \"(\": \"9\", \")\": \"0\", \",\": \".\"\r\n};\r\n\r\nconst enShift = {\r\n    \"1\": \"!\", \"2\": \"@\", \"3\": \"#\", \"4\": \"$\", \"5\": \"%\", \"6\": \"^\", \"7\": \"&\", \"8\": \"*\", \"9\": \"(\", \"0\": \")\",\r\n    \";\": \":\", \"'\": '\"', \"']'\": '\"', \"[\": \"{\", \"]\": \"}\", \",\": \"<\", \".\": \">\", \"/\": \"?\",\r\n    \"!\": \"1\", \"@\": \"2\", \"#\": \"3\", \"$\": \"4\", \"%\": \"5\", \"^\": \"6\", \"&\": \"7\", \"*\": \"8\", \"(\": \"9\", \")\": \"0\",\r\n    \":\": \";\", '\"': \"'\", \"{\": \"[\", \"}\": \"]\", \"<\": \",\", \">\": \".\", \"?\": \"/\"\r\n};\r\n\r\n\r\n\r\nconst Keyboard = {\r\n    elements: {\r\n        main: null,\r\n        keysContainer: null,\r\n        keys: []\r\n    },\r\n\r\n    eventHandlers: {\r\n        oninput: null,\r\n        onclose: null\r\n    },\r\n\r\n    properties: {\r\n        value: \"\",\r\n        capsLock: false,\r\n        shift: false,\r\n        lang: 'en',\r\n        mic: false\r\n    },\r\n\r\n    init() {\r\n        // Create main elements\r\n        this.elements.main = document.createElement(\"div\");\r\n        this.elements.keysContainer = document.createElement(\"div\");\r\n\r\n        // Setup main elements\r\n        this.elements.main.classList.add(\"keyboard\", \"keyboard--hidden\");\r\n        this.elements.keysContainer.classList.add(\"keyboard__keys\");\r\n        this.elements.keysContainer.appendChild(this._createKeys());\r\n\r\n        this.elements.keys = this.elements.keysContainer.querySelectorAll(\".keyboard__key\");\r\n\r\n        // Add to DOM\r\n        this.elements.main.appendChild(this.elements.keysContainer);\r\n        document.body.appendChild(this.elements.main);\r\n\r\n        // Automatically use keyboard for elements with .use-keyboard-input\r\n        document.querySelectorAll(\".use-keyboard-input\").forEach(element => {\r\n            element.addEventListener(\"focus\", () => {\r\n                this.open(element.value, currentValue => {\r\n                    element.value = currentValue;\r\n                });\r\n            });\r\n        });\r\n    },\r\n    _createKeys() {\r\n        const fragment = document.createDocumentFragment();\r\n\r\n        const keyLayout = [\r\n            \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"backspace\",\r\n            \"caps\", \"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\", \"[\", \"]\",\r\n            \"shift\", \"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \";\", \"'\",\r\n            \"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \",\", \".\", \"/\", \"arrow_up\", \"enter\",//\"opacity\",\r\n            \"done\", \"mic\", \"lang\", \"space\", \"audio\", \"arrow_left\", \"arrow_down\", \"arrow_right\",\r\n        ];\r\n\r\n        // Creates HTML for an icon\r\n        const createIconHTML = (icon_name) => {\r\n            return `<i class=\"material-icons\">${icon_name}</i>`;\r\n        };\r\n\r\n        keyLayout.forEach(key => {\r\n            const keyElement = document.createElement(\"button\");\r\n            const insertLineBreak = [\"backspace\", \"]\", \"enter\", \"'\"].indexOf(key) !== -1;\r\n\r\n\r\n\r\n            // Add attributes/classes\r\n            keyElement.setAttribute(\"type\", \"button\");\r\n            keyElement.classList.add(\"keyboard__key\");\r\n\r\n            switch (key) {\r\n                case \"opacity\":\r\n                    keyElement.classList.add(\"keyboard__opacity\");\r\n                    keyElement.innerHTML = ``;\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"lang\":\r\n                    keyElement.classList.add(\"keyboard__key--dark\");//\"keyboard__key--wide\", \r\n                    keyElement.innerHTML = `<span>${this.properties.lang}</span>`;\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        audioButton(1);\r\n                        inputArea.focus();\r\n                        this._toggleLanguage();\r\n                        keyElement.innerHTML = `<span>${this.properties.lang}</span>`;\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"mic\":\r\n                    keyElement.classList.add(\"keyboard__key--activatable\");\r\n                    keyElement.innerHTML = createIconHTML(\"mic\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        audioButton(1);\r\n                        inputArea.focus();\r\n                        this.properties.mic = !this.properties.mic;\r\n                        keyElement.classList.toggle(\"keyboard__key--active\", this.properties.mic);\r\n                        if (this.properties.mic) {\r\n                            startRecognizer();\r\n                        } else {\r\n                            recognition.stop();\r\n                        }\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"arrow_up\":\r\n                    keyElement.classList.add(\"keyboard__key--darkS\");//\"keyboard__key--wide\"\r\n                    keyElement.innerHTML = createIconHTML(\"arrow_upward\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        inputArea.focus();\r\n                        let cursorPosition = getCursorPosition(inputArea);\r\n                        cursorPosition = getCursorUp(cursorPosition, inputArea.value);\r\n                        inputArea.setSelectionRange(cursorPosition, cursorPosition);\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"arrow_left\":\r\n                    keyElement.classList.add(\"keyboard__key--darkS\");//\"keyboard__key--wide\"\r\n                    keyElement.innerHTML = createIconHTML(\"arrow_back\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        inputArea.focus();\r\n                        let cursorPosition = getCursorPosition(inputArea);\r\n                        inputArea.setSelectionRange(cursorPosition - 1, cursorPosition - 1);\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"arrow_down\":\r\n                    keyElement.classList.add(\"keyboard__key--darkS\");//\"keyboard__key--wide\"\r\n                    keyElement.innerHTML = createIconHTML(\"arrow_downward\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        inputArea.focus();\r\n                        let cursorPosition = getCursorPosition(inputArea);\r\n                        cursorPosition = getCursorDown(cursorPosition, inputArea.value);\r\n                        inputArea.setSelectionRange(cursorPosition, cursorPosition);\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"arrow_right\":\r\n                    keyElement.classList.add(\"keyboard__key--darkS\");//\"keyboard__key--wide\"\r\n                    keyElement.innerHTML = createIconHTML(\"arrow_forward\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        inputArea.focus();\r\n                        let cursorPosition = getCursorPosition(inputArea);\r\n                        inputArea.setSelectionRange(cursorPosition + 1, cursorPosition + 1);\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"audio\":\r\n                    keyElement.classList.add(\"keyboard__key--activatable\", \"keyboard__key--active\");//\"keyboard__key--wide\", \r\n                    keyElement.innerHTML = createIconHTML(\"audiotrack\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        audioButton(1);\r\n                        inputArea.focus();\r\n                        sondOnOff = !sondOnOff;\r\n                        keyElement.classList.toggle(\"keyboard__key--active\", sondOnOff);\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"backspace\":\r\n\r\n                    keyElement.classList.add(\"keyboard__key--wide\");\r\n                    keyElement.innerHTML = createIconHTML(\"backspace\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        audioButton(1);\r\n                        inputArea.focus();\r\n                        let cursorPosition = getCursorPosition(inputArea);\r\n                        let newString = this.properties.value.substring(0, cursorPosition - 1) + this.properties.value.slice(cursorPosition, this.properties.value.length);\r\n                        this.properties.value = newString;\r\n                        //this.properties.value = this.properties.value.substring(0, this.properties.value.length - 1);\r\n                        this._triggerEvent(\"oninput\");\r\n                        inputArea.setSelectionRange(cursorPosition - 1, cursorPosition - 1);\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"caps\":\r\n\r\n                    keyElement.classList.add(\"keyboard__key--wide\", \"keyboard__key--activatable\");\r\n                    keyElement.innerHTML = createIconHTML(\"keyboard_capslock\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        audioButton(1);\r\n                        inputArea.focus();\r\n                        this._toggleCapsLock();\r\n                        keyElement.classList.toggle(\"keyboard__key--active\", this.properties.capsLock);\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"shift\":\r\n\r\n                    keyElement.classList.add(\"keyboard__key--wide\", \"keyboard__key--activatable\");\r\n                    keyElement.innerHTML = `<span>Shift</span>`;\r\n                    //keyElement.textContent = '';\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        audioButton(1);\r\n                        inputArea.focus();\r\n                        this._toggleShift();\r\n                        keyElement.classList.toggle(\"keyboard__key--active\", this.properties.shift);\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"enter\":\r\n\r\n                    keyElement.classList.add(\"keyboard__key--wide\");\r\n                    keyElement.innerHTML = createIconHTML(\"keyboard_return\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        audioButton(1);\r\n                        inputArea.focus();\r\n                        let cursorPosition = getCursorPosition(inputArea);\r\n                        let newString = this.properties.value.slice(0, cursorPosition) + \"\\n\" + this.properties.value.slice(cursorPosition, this.properties.value.length);\r\n                        this.properties.value = newString;\r\n                        this._triggerEvent(\"oninput\");\r\n                        inputArea.setSelectionRange(cursorPosition + 1, cursorPosition + 1);\r\n                        //this.properties.value += \"\\n\";\r\n                        //this._triggerEvent(\"oninput\");\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"space\":\r\n\r\n                    keyElement.classList.add(\"keyboard__key--extra-wide\");\r\n                    keyElement.innerHTML = createIconHTML(\"space_bar\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        audioButton(1);\r\n                        inputArea.focus();\r\n                        let cursorPosition = getCursorPosition(inputArea);\r\n                        let newString = this.properties.value.slice(0, cursorPosition) + \" \" + this.properties.value.slice(cursorPosition, this.properties.value.length);\r\n                        this.properties.value = newString;\r\n                        this._triggerEvent(\"oninput\");\r\n                        inputArea.setSelectionRange(cursorPosition + 1, cursorPosition + 1);\r\n                        //this.properties.value += \" \";\r\n                        //this._triggerEvent(\"oninput\");\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"done\":\r\n\r\n                    keyElement.classList.add(\"keyboard__key--wide\", \"keyboard__key--dark\");\r\n                    keyElement.innerHTML = createIconHTML(\"check_circle\");\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        //inputArea.focus();\r\n                        this.close();\r\n                        this._triggerEvent(\"onclose\");\r\n                    });\r\n\r\n                    break;\r\n\r\n                default:\r\n                    keyElement.textContent = key.toLowerCase();\r\n\r\n\r\n                    keyElement.addEventListener(\"click\", () => {\r\n                        inputArea.focus();\r\n                        audioButton();\r\n                        let cursorPosition = getCursorPosition(inputArea);\r\n                        //console.log(key);\r\n                        let newSymbol; //= key.toLowerCase();\r\n\r\n                        if (this.properties.lang === 'en') {\r\n                            newSymbol = key.toLowerCase();\r\n                            /*if (enShift[key.toLowerCase()] != undefined){\r\n                                newSymbol = enShift[key];  \r\n                            } */\r\n                        } else {\r\n                            newSymbol = (changeRu[key.toLowerCase()] != undefined) ?\r\n                                changeRu[key.toLowerCase()] :\r\n                                key.toLowerCase();\r\n                        }\r\n                        if (this.properties.capsLock & this.properties.shift) {\r\n                            newSymbol = newSymbol.toLowerCase();\r\n\r\n                        }\r\n                        if (this.properties.capsLock || this.properties.shift) {\r\n                            newSymbol = newSymbol.toUpperCase();\r\n                        }\r\n\r\n                        if (this.properties.shift) {\r\n                            let changeShift = this.properties.lang == 'en' ? enShift : ruShift;\r\n                            if (changeShift[newSymbol] != undefined) {\r\n                                newSymbol = changeShift[newSymbol];\r\n                            }\r\n                        }\r\n                        let newString = this.properties.value.slice(0, cursorPosition) + newSymbol + this.properties.value.slice(cursorPosition, this.properties.value.length);\r\n                        //this.properties.value += this.properties.capsLock ? key.toUpperCase() : key.toLowerCase();\r\n                        this.properties.value = newString;\r\n                        this._triggerEvent(\"oninput\");\r\n                        inputArea.setSelectionRange(cursorPosition + 1, cursorPosition + 1);\r\n                    });\r\n\r\n                    break;\r\n            }\r\n\r\n            fragment.appendChild(keyElement);\r\n\r\n            if (insertLineBreak) {\r\n                fragment.appendChild(document.createElement(\"br\"));\r\n            }\r\n        });\r\n\r\n        return fragment;\r\n    },\r\n\r\n    _triggerEvent(handlerName) {\r\n        //console.log('555555555555555555555555');\r\n        if (typeof this.eventHandlers[handlerName] == \"function\") {\r\n            this.eventHandlers[handlerName](this.properties.value);\r\n            //console.log('151')\r\n        }\r\n    },\r\n\r\n    _toggleCapsLock() {\r\n        this.properties.capsLock = !this.properties.capsLock;\r\n        for (const key of this.elements.keys) {\r\n            if (key.childElementCount === 0) {\r\n                let upperKey = this.properties.shift ? !this.properties.capsLock : this.properties.capsLock;\r\n                key.textContent = upperKey ? key.textContent.toUpperCase() : key.textContent.toLowerCase();\r\n            }\r\n        }\r\n    },\r\n\r\n    _toggleShift() {\r\n        let changeShift = this.properties.lang == 'en' ? enShift : ruShift;\r\n        this.properties.shift = !this.properties.shift;\r\n        for (const key of this.elements.keys) {\r\n            if (key.childElementCount === 0) {\r\n                if (changeShift[key.textContent.toLowerCase()] != undefined) {\r\n                    //console.log(changeShift[key.textContent]);\r\n                    key.textContent = changeShift[key.textContent];\r\n                } else {\r\n                    let upperKey = this.properties.capsLock ? !this.properties.shift : this.properties.shift;\r\n                    key.textContent = upperKey ? key.textContent.toUpperCase() : key.textContent.toLowerCase();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    _toggleLanguage() {\r\n        //let changeShift2 = this.properties.lang == 'en' ? enShift : ruShift\r\n        //let changeShift = this.properties.lang == 'en' ? ruShift : enShift\r\n        /*let upperKey = this.properties.capsLock ? !this.properties.shift : this.properties.shift;\r\n         for (const key of this.elements.keys) {\r\n          if (key.childElementCount === 0) {\r\n              if( changeRuEn[key.textContent.toLowerCase()] != undefined){\r\n                let textContent = changeRuEn[key.textContent.toLowerCase()]; \r\n                key.textContent = upperKey ? textContent.toUpperCase() : textContent.toLowerCase();\r\n                }\r\n              if (this.properties.shift) {\r\n                //console.log(changeShift[key.textContent.toLowerCase()], key.textContent)\r\n                if( changeShift[key.textContent.toLowerCase()] != undefined){\r\n                  console.log(changeShift[key.textContent.toLowerCase()], key.textContent);\r\n                  let shiftText = changeShift[key.textContent];\r\n                  if( changeShift2[shiftText.toLowerCase()] != undefined){\r\n                    key.textContent = changeShift2[shiftText];  \r\n                  } \r\n                }\r\n             \r\n            } /*else {\r\n              let upperKey = this.properties.capsLock ? !this.properties.shift : this.properties.shift;\r\n              key.textContent = upperKey ? key.textContent.toUpperCase() : key.textContent.toLowerCase();\r\n            }*/\r\n        let shift = this.properties.shift;\r\n        if (shift) {\r\n            this._toggleShift()\r\n        }\r\n        this.properties.lang = this.properties.lang == 'en' ? 'ru' : 'en'\r\n        let changeRuEn = this.properties.lang == 'en' ? changeEn : changeRu\r\n        for (const key of this.elements.keys) {\r\n            if (key.childElementCount === 0) {\r\n                if (changeRuEn[key.textContent.toLowerCase()] != undefined) {\r\n                    let textContent = changeRuEn[key.textContent.toLowerCase()];\r\n                    key.textContent = this.properties.capsLock ? textContent.toUpperCase() : textContent.toLowerCase();\r\n                }\r\n            }\r\n        }\r\n        if (shift) {\r\n            this._toggleShift()\r\n        }\r\n    },\r\n\r\n    open(initialValue, oninput, onclose) {\r\n        //console.log('3333333333333333333333333333');\r\n        //console.log(document.querySelector(\".use-keyboard-input\"));\r\n        document.querySelector(\".use-keyboard-input\").focus();\r\n        this.properties.value = initialValue || \"\";\r\n        this.eventHandlers.oninput = oninput;\r\n        this.eventHandlers.onclose = onclose;\r\n        this.elements.main.classList.remove(\"keyboard--hidden\");\r\n    },\r\n\r\n    close() {\r\n        //console.log('22222222222222222222222');\r\n        this.properties.value = \"\";\r\n        this.eventHandlers.oninput = oninput;\r\n        this.eventHandlers.onclose = onclose;\r\n        this.elements.main.classList.add(\"keyboard--hidden\");\r\n    }\r\n};\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", function () {\r\n    //console.log('111111111111111111111111');\r\n    Keyboard.init();\r\n});\r\n\r\nfunction keyboardPress(e) {\r\n    let elems = document.getElementsByClassName(\"keyboard__key\");\r\n\r\n    for (let i = 0; i < elems.length; i++) {\r\n\r\n        //enter\r\n        if (e.keyCode == 13 & elems[i].innerText == 'keyboard_return') {\r\n            addPressVirtualKeyboard(elems[i], 1)\r\n            //shift  \r\n        } else if (e.keyCode == 16 & elems[i].innerText == 'Shift') {\r\n            if (!Keyboard.properties.shift) {\r\n                inputArea.focus();\r\n                Keyboard._toggleShift();\r\n                Keyboard.properties.shift = true;\r\n                addPressVirtualKeyboard(elems[i], 1);\r\n                elems[i].classList.toggle(\"keyboard__key--active\", Keyboard.properties.shift);\r\n            }\r\n            //caps lock  \r\n        } else if (e.keyCode == 20 & elems[i].innerText == 'keyboard_capslock') {\r\n            addPressVirtualKeyboard(elems[i], 1);\r\n            inputArea.focus();\r\n            Keyboard._toggleCapsLock();\r\n            elems[i].classList.toggle(\"keyboard__key--active\", Keyboard.properties.capsLock);\r\n            //spase  \r\n        } else if (e.keyCode == 32 & elems[i].innerText == 'space_bar') {\r\n            addPressVirtualKeyboard(elems[i], 1)\r\n            //backspace  \r\n        } else if (e.keyCode == 8 & elems[i].innerText == 'backspace') {\r\n            addPressVirtualKeyboard(elems[i], 1)\r\n        } else if (e.key.toLowerCase() == elems[i].innerText.toLowerCase()) {\r\n            addPressVirtualKeyboard(elems[i], 0)\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction startRecognizer() {\r\n    if ('webkitSpeechRecognition' in window) {\r\n\r\n        recognition.lang = Keyboard.properties.lang; //'ru';\r\n\r\n        recognition.onresult = function (event) {\r\n            let result = event.results[event.resultIndex];\r\n            //console.clear();\r\n            inputArea.focus();\r\n            let cursorPosition = getCursorPosition(inputArea);\r\n            //cursorPosition = getCursorUp(cursorPosition, inputArea.value);\r\n            //inputArea.setSelectionRange(cursorPosition,cursorPosition); \r\n            let value = inputArea.value.substr(0, cursorPosition) + result[0].transcript + ' ' + inputArea.value.substr(cursorPosition, inputArea.value.length);\r\n            inputArea.value = value;\r\n            inputArea.setSelectionRange(cursorPosition + result[0].transcript.length + 1, cursorPosition + result[0].transcript.length + 1);\r\n            //inputArea.value += result[0].transcript + ' ';\r\n            //console.log(result[0].transcript);\r\n        };\r\n\r\n        recognition.onend = function () {\r\n            //console.log('Распознавание завершилось.');\r\n            if (Keyboard.properties.mic) {\r\n                recognition.start();\r\n            } else {\r\n                recognition.stop();\r\n            }\r\n        };\r\n\r\n        recognition.start();\r\n\r\n    } else alert('webkitSpeechRecognition не поддерживается :(')\r\n}\r\n\r\n\r\ndocument.addEventListener('keyup', function (e) {\r\n    if (e.keyCode == 16) {\r\n        let elems = document.getElementsByClassName(\"keyboard__key--active\");\r\n        for (let i = 0; i < elems.length; i++) {\r\n            if (e.keyCode == 16 & elems[i].innerText == 'Shift') {\r\n                inputArea.focus();\r\n                Keyboard._toggleShift();\r\n                Keyboard.properties.shift = false;\r\n                elems[i].classList.toggle(\"keyboard__key--active\", Keyboard.properties.shift);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n\r\nfunction addPressVirtualKeyboard(e, snd) {\r\n    e.classList.add(\"keyboard__key_active\");\r\n    setTimeout((function () {\r\n        e.classList.toggle(\"keyboard__key_active\");\r\n    }), 305);\r\n    audioButton(snd);\r\n}\r\n\r\nfunction audioButton(ver) {\r\n    if (sondOnOff) {\r\n        let snd; //= (ver==1) ? new Audio(\"./assets/audio/backspace.mp3\")\r\n        //           : new Audio(\"./assets/audio/button.wav\");\r\n        if (ver == 1) {\r\n            snd = new Audio(\"./assets/audio/backspace.mp3\")\r\n        } else {\r\n            snd = (Keyboard.properties.lang == 'ru') ? new Audio(\"./assets/audio/button2.wav\")\r\n                : new Audio(\"./assets/audio/button.wav\");\r\n        }\r\n        //to play the sound:\r\n        snd.play();\r\n        //to re-cue it to the beginning (so that you can play it again):\r\n        snd.currentTime = 0;\r\n    }\r\n}\r\n\r\n\r\nfunction getCursorPosition(ctrl) {\r\n    let CaretPos = 0;\r\n    if (document.selection) {\r\n        ctrl.focus();\r\n        let Sel = document.selection.createRange();\r\n        Sel.moveStart('character', -ctrl.value.length);\r\n        CaretPos = Sel.text.length;\r\n    } else if (ctrl.selectionStart || ctrl.selectionStart == '0') {\r\n        CaretPos = ctrl.selectionStart;\r\n    }\r\n    return CaretPos;\r\n}\r\n\r\nfunction getCursorUp(curPosition, str) {\r\n    let newCurPosition,\r\n        prevLenght = 0,\r\n        prevN = -1;\r\n    while (true) {\r\n\r\n        let foundPos = str.indexOf(\"\\n\", (prevN + 1));\r\n        if (foundPos == -1) {\r\n            if (prevN == -1) break;\r\n            foundPos = str.length;\r\n        }\r\n        if (curPosition > prevN & curPosition <= foundPos) {\r\n            let beginSym = curPosition - prevN;\r\n            if (beginSym <= prevLenght) {\r\n                newCurPosition = prevN - (prevLenght - beginSym);\r\n                break;\r\n            } else {\r\n                newCurPosition = prevN == -1 ? 0 : prevN;\r\n                break;\r\n            }\r\n        }\r\n        prevLenght = foundPos - prevN;\r\n        prevN = foundPos;\r\n    }\r\n    return newCurPosition;\r\n}\r\n\r\nfunction getCursorDown(curPosition, str) {\r\n    let newCurPosition = str.length,\r\n        beginSym,\r\n        prevN = -1;\r\n    while (true) {\r\n\r\n        let foundPos = str.indexOf(\"\\n\", (prevN + 1));\r\n        if (foundPos == -1) {\r\n            if (prevN == -1) break;\r\n\r\n            foundPos = str.length;\r\n        }\r\n        if (curPosition <= prevN & curPosition < foundPos) {\r\n            //let beginSym = curPosition - prevN;\r\n            let nextLenght = foundPos - prevN;\r\n            if (beginSym <= nextLenght) {\r\n                newCurPosition = prevN + beginSym;\r\n                break;\r\n            } else {\r\n                newCurPosition = foundPos;\r\n                break;\r\n            }\r\n        }\r\n        beginSym = curPosition - prevN;\r\n        //prevLenght = foundPos - prevN;\r\n        prevN = foundPos;\r\n    }\r\n    return newCurPosition;\r\n}\r\n\r\n\r\ndocument.querySelector(\".use-keyboard-input\").addEventListener('keydown', keyboardPress);"],"names":["inputArea","document","querySelector","sondOnOff","recognition","webkitSpeechRecognition","changeEn","changeRu","ruShift","enShift","Keyboard","elements","main","keysContainer","keys","eventHandlers","oninput","onclose","properties","value","capsLock","shift","lang","mic","init","createElement","classList","add","appendChild","_createKeys","querySelectorAll","body","forEach","element","addEventListener","open","currentValue","fragment","createDocumentFragment","keyLayout","createIconHTML","icon_name","key","keyElement","insertLineBreak","indexOf","setAttribute","innerHTML","audioButton","focus","_toggleLanguage","toggle","startRecognizer","stop","cursorPosition","getCursorPosition","getCursorUp","setSelectionRange","getCursorDown","newString","substring","slice","length","_triggerEvent","_toggleCapsLock","_toggleShift","close","textContent","toLowerCase","newSymbol","undefined","toUpperCase","changeShift","handlerName","childElementCount","upperKey","changeRuEn","initialValue","remove","window","keyboardPress","e","elems","getElementsByClassName","i","keyCode","innerText","addPressVirtualKeyboard","onresult","event","result","results","resultIndex","substr","transcript","onend","start","alert","snd","setTimeout","ver","Audio","play","currentTime","ctrl","CaretPos","selection","Sel","createRange","moveStart","text","selectionStart","curPosition","str","newCurPosition","prevLenght","prevN","foundPos","beginSym","nextLenght"],"sourceRoot":""}